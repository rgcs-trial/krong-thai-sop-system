
> krong-thai-sop-system@0.2.0 dev /Users/rgcs-admin/workspace/krong-thai-sop-system
> NODE_ENV=development next dev

   â–² Next.js 15.4.4
   - Local:        http://localhost:3000
   - Network:      http://10.0.0.95:3000
   - Environments: .env.local

 âœ“ Starting...
 âœ“ Ready in 1487ms
 âœ“ Compiled /middleware in 236ms (264 modules)
âœ… Environment configuration validated for development
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:20:17.890Z",
  "type": "suspicious_activity",
  "source": "device_validation",
  "details": {
    "userAgent": "curl/8.7.1",
    "fingerprint": null,
    "reason": "suspicious_user_agent"
  },
  "userAgent": "curl/8.7.1",
  "ip": "::1"
}
 â—‹ Compiling /[locale]/login ...
 âœ“ Compiled /[locale]/login in 1460ms (874 modules)
 GET /en/login?redirect=%2F 200 in 2119ms
 GET /en/login?redirect=%2F 200 in 37ms
 GET /en/login?redirect=%2F 200 in 30ms
 â—‹ Compiling /api/auth/location-session/check ...
 âœ“ Compiled /api/auth/location-session/check in 606ms (1000 modules)
 âš  Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 GET /api/auth/location-session/check 200 in 748ms
 GET /en/login?redirect=%2F 200 in 202ms
 GET /api/auth/location-session/check 200 in 214ms
 âœ“ Compiled /api/auth/login in 486ms (990 modules)
[AUTH-DEBUG] Environment check: {
  hasSupabaseUrl: true,
  hasServiceKey: true,
  hasAnonKey: true,
  nodeEnv: 'development',
  supabaseUrl: 'https://blimbcomhmhlubqngben.s...'
}
[AUTH-ERROR] 2025-07-27T14:22:57.185Z: {
  "timestamp": "2025-07-27T14:22:57.185Z",
  "context": "JSON_PARSE_ERROR",
  "error": {
    "name": "SyntaxError",
    "message": "Unexpected end of JSON input",
    "stack": "SyntaxError: Unexpected end of JSON input\n    at JSON.parse (<anonymous>)\n    at parseJSONFromBytes (node:internal/deps/undici/undici:6223:19)\n    at successSteps (node:internal/deps/undici/undici:6204:27)\n    at consumeBody (node:internal/deps/undici/undici:6210:9)\n    at NextRequest.json (node:internal/deps/undici/undici:6152:18)\n    at POST (webpack-internal:///(rsc)/./src/app/api/auth/login/route.ts:74:34)\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_context_frame:59:14)\n    at AppRouteRouteModule.do (/Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38861)\n    at /Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:48879\n    at /Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/lib/trace/tracer.js:169:36\n    at NoopContextManager.with (/Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:7062)\n    at ContextAPI.with (/Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:518)\n    at NoopTracer.startActiveSpan (/Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:18093)\n    at ProxyTracer.startActiveSpan (/Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:18854)\n    at /Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/lib/trace/tracer.js:151:103\n    at NoopContextManager.with (/Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:7062)\n    at ContextAPI.with (/Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:518)\n    at NextTracerImpl.trace (/Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/lib/trace/tracer.js:151:28)\n    at /Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:48724\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_context_frame:63:14)\n    at /Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:46103\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_context_frame:63:14)\n    at /Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:46060\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_context_frame:63:14)\n    at AppRouteRouteModule.handle (/Users/rgcs-admin/workspace/krong-thai-sop-system/node_modules/.pnpm/next@15.4.4_@babel+core@7.28.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:46014)"
  },
  "metadata": {
    "operation": "login",
    "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
    "ip": "::ffff:127.0.0.1"
  }
}
 GET /en/login?redirect=%2F 200 in 629ms
 GET /api/auth/location-session/check 200 in 125ms
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:22:58.842Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/login"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
 GET /en/login?redirect=%2F 200 in 34ms
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:22:59.412Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/location-session/check"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:23:00.184Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/login"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
 GET /en/login?redirect=%2F 200 in 40ms
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:23:00.761Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/location-session/check"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:23:01.460Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/login"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
 GET /en/login?redirect=%2F 200 in 32ms
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:23:02.011Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/location-session/check"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
 âœ“ Compiled in 106ms (366 modules)
 GET /en/login?redirect=%2F 200 in 106ms
 âœ“ Compiled in 111ms (366 modules)
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:23:02.820Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/login"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
 GET /en/login?redirect=%2F 200 in 21ms
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:23:02.864Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/location-session/check"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
 GET /en/login?redirect=%2F 200 in 30ms
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:23:03.378Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/location-session/check"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:23:04.166Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/login"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
 âœ“ Compiled in 101ms (366 modules)
 GET /en/login?redirect=%2F 200 in 37ms
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:23:32.697Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/location-session/check"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
ðŸ”’ Security Event: {
  "timestamp": "2025-07-27T14:23:33.527Z",
  "type": "rate_limit_exceeded",
  "source": "auth_middleware",
  "details": {
    "ip": "::ffff:127.0.0.1",
    "count": 5,
    "maxAttempts": 5,
    "windowMs": 900000,
    "path": "/api/auth/login"
  },
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1"
}
 âœ“ Compiled in 115ms (366 modules)
 âœ“ Compiled in 82ms (366 modules)
 âœ“ Compiled in 75ms (366 modules)
 âœ“ Compiled in 73ms (366 modules)
 âœ“ Compiled in 99ms (366 modules)
 â¨¯ [Error: ENOENT: no such file or directory, open '/Users/rgcs-admin/workspace/krong-thai-sop-system/.next/prerender-manifest.json'] {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/rgcs-admin/workspace/krong-thai-sop-system/.next/prerender-manifest.json',
  page: '/en/login'
}
 â¨¯ Failed to generate static paths for /[locale]/login:
[Error: ENOENT: no such file or directory, open '/Users/rgcs-admin/workspace/krong-thai-sop-system/.next/prerender-manifest.json'] {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/rgcs-admin/workspace/krong-thai-sop-system/.next/prerender-manifest.json'
}
 â¨¯ Failed to generate static paths for /[locale]/login:
[Error: ENOENT: no such file or directory, open '/Users/rgcs-admin/workspace/krong-thai-sop-system/.next/prerender-manifest.json'] {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/rgcs-admin/workspace/krong-thai-sop-system/.next/prerender-manifest.json'
}
 â—‹ Compiling /_error ...
 âœ“ Compiled /_error in 965ms (1188 modules)
 â¨¯ [Error: ENOENT: no such file or directory, open '/Users/rgcs-admin/workspace/krong-thai-sop-system/.next/prerender-manifest.json'] {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/rgcs-admin/workspace/krong-thai-sop-system/.next/prerender-manifest.json'
}
 GET /en/login?redirect=%2F 500 in 2418ms
 âœ“ Compiled in 101ms (513 modules)
[?25h
